<!DOCTYPE html>
<html lang="ja" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>mri.com-user:ver50</title>
<meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="mri.com-user,ver50"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='mri.com-user';var JSINFO = {"id":"mri.com-user:ver50","namespace":"mri.com-user","ACT":"export_xhtml","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<link rel="stylesheet" type="text/css" href="standard.css">
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2" defer="defer"></script>
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=1ba1ca9e5699c4cd37eb1cb4bdf6d000" defer="defer"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<div class="level1"><a href="index.html">MRI.COM</a></div>
<!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">目次</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#mricom_v50">MRI.COM v5.0</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#ソースコードの取得">ソースコードの取得</a></div></li>
<li class="level2"><div class="li"><a href="#追加された主な機能">追加された主な機能</a></div></li>
<li class="level2"><div class="li"><a href="#v46_から_v50_への移行">v4.6 から v5.0 への移行</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#入力データファイル">入力データファイル</a></div></li>
<li class="level3"><div class="li"><a href="#namelist">namelist</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#削除された機能">削除された機能</a></div></li>
<li class="level2"><div class="li"><a href="#機能削除の予定">機能削除の予定</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="mricom_v50">MRI.COM v5.0</h1>
<div class="level1">

<p>
MRI.COM v5.0 は、2021年5月にリリースされた安定版です。
時間差分スキームが Leapfrog + Matsuno から Leapfrog-Adams-Moulton (LFAM3) に変更されます。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;MRI.COM v5.0&quot;,&quot;hid&quot;:&quot;mricom_v50&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-212&quot;} -->
<h2 class="sectionedit2" id="ソースコードの取得">ソースコードの取得</h2>
<div class="level2">

<p>
MRI.COM gitリポジトリでブランチ「5_0」をチェックアウトして下さい。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97&quot;,&quot;hid&quot;:&quot;\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;213-347&quot;} -->
<h2 class="sectionedit3" id="追加された主な機能">追加された主な機能</h2>
<div class="level2">

<p>
v4.6から以下の機能が追加されています。
</p>
<ul>
<li class="level1 node"><div class="li"> 海面フラックス</div>
<ul>
<li class="level2 node"><div class="li"> 新オプション BULKECMWF(ECMWF 基準の海面バルク式)の追加</div>
<ul>
<li class="level3"><div class="li"> 大気モデル最下層の高度からフラックス計算が可能</div>
</li>
<li class="level3"><div class="li"> Charnock 係数を外部ファイルから読み込み可能にする</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> GSAM_MRI で使用されている海面アルベド・スキームを追加</div>
</li>
<li class="level2"><div class="li"> 降水と降雪を分離して扱う</div>
</li>
<li class="level2"><div class="li"> ファイルから読み込んだ skin temperature、またはSSTをもとに海面フラックスを計算する</div>
</li>
<li class="level2"><div class="li"> 結合時に保存性を保つように海面フラックスを調整するオプションの追加</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> LFAM3 時間差分スキームの改善</div>
<ul>
<li class="level2"><div class="li"> 精度より安定性を優先するオプション(AB2e)を追加</div>
</li>
<li class="level2"><div class="li"> 係数の精度向上</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> 順圧計算にAB3AM4スキームのオプションを追加</div>
</li>
<li class="level1"><div class="li"> リストア強制に offset 等のオプションを追加</div>
</li>
<li class="level1"><div class="li"> 粒子追跡機能の強化</div>
</li>
<li class="level1 node"><div class="li"> 計算機対応</div>
<ul>
<li class="level2"><div class="li"> 気象研新スパコン(富士通CX2550 M5、intel fortran開発用)</div>
</li>
<li class="level2"><div class="li"> 北大低温研計算機</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> 出力機能の強化</div>
<ul>
<li class="level2"><div class="li"> MPIノード毎に分割したファイルでリスタート入出力を行うオプション</div>
</li>
<li class="level2"><div class="li"> netCDF 並列 I/O対応</div>
</li>
<li class="level2"><div class="li"> NuSDaS フォーマと出力</div>
</li>
<li class="level2"><div class="li"> 水平積算した海氷物理量</div>
</li>
<li class="level2"><div class="li"> 気圧補正した海面高度</div>
</li>
<li class="level2"><div class="li"> 実行時にモニター出力リストが作成される</div>
</li>
</ul>
</li>
</ul>

<p>
その他の変更
</p>
<ul>
<li class="level1"><div class="li"> 海氷モデルの安定性向上</div>
</li>
<li class="level1"><div class="li"> 等密度面拡散テンソル・テーパリングの仕様を変更</div>
</li>
<li class="level1"><div class="li"> SOLARANGLEオプション時の散乱光の仕様を変更</div>
</li>
<li class="level1"><div class="li"> 気象庁現業に合わせたソースコードの配置変更</div>
</li>
<li class="level1"><div class="li"> 高速化 (多数のOpenMP、通信の改善、ベクトル化)</div>
</li>
<li class="level1"><div class="li"> デバッグモード改善</div>
</li>
<li class="level1"><div class="li"> 多数のバグ修正</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u8ffd\u52a0\u3055\u308c\u305f\u4e3b\u306a\u6a5f\u80fd&quot;,&quot;hid&quot;:&quot;\u8ffd\u52a0\u3055\u308c\u305f\u4e3b\u306a\u6a5f\u80fd&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;348-2214&quot;} -->
<h2 class="sectionedit4" id="v46_から_v50_への移行">v4.6 から v5.0 への移行</h2>
<div class="level2">

<p>
安定版 <a href="./mri.com-user_ver46.html" class="wikilink1" title="mri.com-user_ver46" data-wiki-id="mri.com-user_ver46">v4.6</a> から v5.0 へ移行する場合のメモです。
ほぼ同じ設定にした場合でも結果は変わります。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;v4.6 \u304b\u3089 v5.0 \u3078\u306e\u79fb\u884c&quot;,&quot;hid&quot;:&quot;v46_\u304b\u3089_v50_\u3078\u306e\u79fb\u884c&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;2215-2402&quot;} -->
<h3 class="sectionedit5" id="入力データファイル">入力データファイル</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>SOMリスタート</strong> v4.6 で変更していなかった場合にファイル名変更が必須</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u5165\u529b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb&quot;,&quot;hid&quot;:&quot;\u5165\u529b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;2403-2544&quot;} -->
<h3 class="sectionedit6" id="namelist">namelist</h3>
<div class="level3">

<p>
主な変更です。変更する場合は docs/README_Namelist.md を参照してください
</p>
<ul>
<li class="level1"><div class="li"> デフォルトの時間差分スキームを leap frog + Matsuno から LFAM3 へ変更</div>
</li>
<li class="level1 node"><div class="li"> 海氷モデル: nmlrs_* から nml_restart へ指定方法を変更</div>
<ul>
<li class="level2"><div class="li"> docs/README_Restart.md を参照</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> NPZDモデル: nml_bioNPZD の shwv_intv_sec, shwv_data_intv_sec, l_shwv_time_average</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;namelist&quot;,&quot;hid&quot;:&quot;namelist&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;2545-2956&quot;} -->
<h2 class="sectionedit7" id="削除された機能">削除された機能</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> コンパイル・オプション必須化：ZSTAR, BULKITER</div>
</li>
<li class="level1"><div class="li"> オプション削除: EXACTRHO, NETCDF4CLASSIC, BULKKONDO2、BULKNCAR2004</div>
</li>
<li class="level1"><div class="li"> nmlrs_*</div>
</li>
<li class="level1"><div class="li"> l_global_local_cnsv_ssh = .false.</div>
</li>
<li class="level1"><div class="li"> l_calc_tracer_before_velocity</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u524a\u9664\u3055\u308c\u305f\u6a5f\u80fd&quot;,&quot;hid&quot;:&quot;\u524a\u9664\u3055\u308c\u305f\u6a5f\u80fd&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;2957-3220&quot;} -->
<h2 class="sectionedit8" id="機能削除の予定">機能削除の予定</h2>
<div class="level2">

<p>
次期安定版(v5.2)で削除される予定の機能です。
</p>
<ul>
<li class="level1"><div class="li"> l_LFAM3 = .false. ( leap frog + Matsuno 時間差分スキーム、v5.0でも非推奨)</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u6a5f\u80fd\u524a\u9664\u306e\u4e88\u5b9a&quot;,&quot;hid&quot;:&quot;\u6a5f\u80fd\u524a\u9664\u306e\u4e88\u5b9a&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;3221-&quot;} --></div>
</body>
</html>
