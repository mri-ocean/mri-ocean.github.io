<!DOCTYPE html>
<html lang="ja" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>mri.com-user:dev:name_rule</title>
<meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="mri.com-user,dev,name_rule"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='mri.com-user:dev';var JSINFO = {"id":"mri.com-user:dev:name_rule","namespace":"mri.com-user:dev","ACT":"export_xhtml","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<link rel="stylesheet" type="text/css" href="standard.css">
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2" defer="defer"></script>
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=1ba1ca9e5699c4cd37eb1cb4bdf6d000" defer="defer"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<div class="level1"><a href="index.html">MRI.COM</a></div>
<!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">目次</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#mricom_命名規則">MRI.COM 命名規則</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#モジュール名">モジュール名</a></div></li>
<li class="level2"><div class="li"><a href="#サブルーチン名">サブルーチン名</a></div></li>
<li class="level2"><div class="li"><a href="#namelist名">namelist名</a></div></li>
<li class="level2"><div class="li"><a href="#略語">略語</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="mricom_命名規則">MRI.COM 命名規則</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;MRI.COM \u547d\u540d\u898f\u5247&quot;,&quot;hid&quot;:&quot;mricom_\u547d\u540d\u898f\u5247&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-36&quot;} -->
<h2 class="sectionedit2" id="モジュール名">モジュール名</h2>
<div class="level2">

<p>
原則、<code>oc_mod_[ファイル名]</code>とする。通常は名詞。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u30e2\u30b8\u30e5\u30fc\u30eb\u540d&quot;,&quot;hid&quot;:&quot;\u30e2\u30b8\u30e5\u30fc\u30eb\u540d&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;37-137&quot;} -->
<h2 class="sectionedit3" id="サブルーチン名">サブルーチン名</h2>
<div class="level2">

<p>
サブルーチンには <strong>モジュール名(アンダーバー２つ)機能</strong> (<em>modulename</em>__<em>functionality</em>)　という名前をつける
</p>

<p>
例： tracer__diagnose_horz_flux
</p>

<p>
ただし単一のモジュール内でのみ利用される、private 指定のサブルーチン・関数に関しては、 <strong>モジュール名(アンダーバー2つ)</strong> を付与しない
</p>

<p>
例： (OK) bubble_sort
</p>

<p>
　　 (NG) ale_topo_vary__bubble_sort
</p>

</div>

<h4 id="代表的なサブルーチン_メソッド">代表的なサブルーチン(メソッド)</h4>
<div class="level4">

<p>
通常は動詞とする。
各モジュールで備えるメソッドには、なるべく共通の名前を付けると分かりやすい。他にもあれば適当に追加してください。(アルファベット順)
</p>
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0">メソッド名 </th><th class="col1">行う作業 </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0">add_hoge</td><td class="col1"> ある変数に足し算する</td>
	</tr>
	<tr class="row2">
		<td class="col0">calc_hoge</td><td class="col1"> モジュール内変数によりある量を計算し、呼び出し側に返す</td>
	</tr>
	<tr class="row3">
		<td class="col0">diagnose</td><td class="col1"> 今のステップにおける変数の値を計算し、モジュール内変数に保持する</td>
	</tr>
	<tr class="row4">
		<td class="col0">fin</td><td class="col1"> 終了処理を行う</td>
	</tr>
	<tr class="row5">
		<td class="col0">get_hoge</td><td class="col1"> ある変数を取得する</td>
	</tr>
	<tr class="row6">
		<td class="col0">give_hoge</td><td class="col1"> ある変数をOGCMの外側から与える(例えばMOVE)</td>
	</tr>
	<tr class="row7">
		<td class="col0">ini</td><td class="col1"> 初期設定。namelistを読んで、モジュールで使用する定数・チューニングパラメータを決定する(restartデータを読む前)</td>
	</tr>
	<tr class="row8">
		<td class="col0">predict</td><td class="col1"> 次ステップの値を予報する</td>
	</tr>
	<tr class="row9">
		<td class="col0">prepare</td><td class="col1"> restartデータを読んだ後、1ステップ目のメインルーチンに入る前の作業</td>
	</tr>
	<tr class="row10">
		<td class="col0">print</td><td class="col1"> 標準出力に表示する</td>
	</tr>
	<tr class="row11">
		<td class="col0">read_restart</td><td class="col1"> restartデータを初期値として読み込む</td>
	</tr>
	<tr class="row12">
		<td class="col0">register</td><td class="col1"> 構造体の登録を行う</td>
	</tr>
	<tr class="row13">
		<td class="col0">rewrite</td><td class="col1"> 変数を更新する (1つ前の時間ステップの変数はrewrite_prev, 今のステップの変数はrewrite_now)</td>
	</tr>
	<tr class="row14">
		<td class="col0">set_hoge</td><td class="col1"> モジュールの内部変数を与える</td>
	</tr>
	<tr class="row15">
		<td class="col0">subtract_hoge</td><td class="col1"> ある変数に引き算する</td>
	</tr>
	<tr class="row16">
		<td class="col0">write_history</td><td class="col1"> historyデータを出力する</td>
	</tr>
	<tr class="row17">
		<td class="col0">write_restart</td><td class="col1"> restartデータを出力する</td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;899-2112&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u30b5\u30d6\u30eb\u30fc\u30c1\u30f3\u540d&quot;,&quot;hid&quot;:&quot;\u30b5\u30d6\u30eb\u30fc\u30c1\u30f3\u540d&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;138-2113&quot;} -->
<h2 class="sectionedit5" id="namelist名">namelist名</h2>
<div class="level2">

<p>
項目名
</p>
<ul>
<li class="level1"><div class="li"> 冒頭に「nml_」を付ける</div>
</li>
<li class="level1"><div class="li"> namelist項目はモジュール毎に分ける(1つのモジュールで読んでサブモジュールに振り分けるのは、なるべく避ける)</div>
</li>
<li class="level1"><div class="li"> 31文字以内(超えると、front実行時に読み込みエラーとなる)</div>
</li>
</ul>

<p>
変数名
</p>
<ul>
<li class="level1"><div class="li"> 変数が物理次元を持つ場合は、最後に「_単位」を付けるのを推奨。例：拡散係数「_cm2ps」 (『リーダブルコード』参照)</div>
</li>
<li class="level1"><div class="li"> 論理変数名：接頭辞「l_」を付ける</div>
</li>
<li class="level1"><div class="li"> ファイル名：接頭辞「file_」を付ける</div>
</li>
<li class="level1"><div class="li"> 整数、実数の接頭辞は特になし</div>
</li>
<li class="level1"><div class="li"> 変数名の完全な重複は避ける。</div>
</li>
<li class="level1"><div class="li"> of は入れない。単語の順番は、数学の変数ぽくする。変数+下添字</div>
</li>
<li class="level1"><div class="li"> 変更、追加した場合は、そのコミット中にdocs/README.Namelistにきちんと書く。</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;namelist\u540d&quot;,&quot;hid&quot;:&quot;namelist\u540d&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;2114-3001&quot;} -->
<h2 class="sectionedit6" id="略語">略語</h2>
<div class="level2">

<p>
処理系によっては、サブルーチンや変数の名前に文字数に制限がある場合もあるので、単語を短縮して使わざるを得ない状況になった場合には、以下のリストを参考にサブルーチンや変数の名前をつけ、<a href="http://www.nag-j.co.jp/fortran/FI_4.html#FortranVariables" class="urlextern" title="http://www.nag-j.co.jp/fortran/FI_4.html#FortranVariables" rel="ugc nofollow">全体で31文字以下</a>になるようにする。全てに適用する必要はない。
</p>
<div class="table sectionedit7"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> 単語 </th><th class="col1"> 略語 </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> boundary </td><td class="col1"> bndr </td>
	</tr>
	<tr class="row2">
		<td class="col0"> closure </td><td class="col1"> clsr </td>
	</tr>
	<tr class="row3">
		<td class="col0"> diagnose </td><td class="col1"> diag </td>
	</tr>
	<tr class="row4">
		<td class="col0"> diffusion/diffusivity </td><td class="col1"> diff </td>
	</tr>
	<tr class="row5">
		<td class="col0"> history </td><td class="col1"> hs </td>
	</tr>
	<tr class="row6">
		<td class="col0"> horizontal </td><td class="col1"> horz </td>
	</tr>
	<tr class="row7">
		<td class="col0"> independent </td><td class="col1"> indep </td>
	</tr>
	<tr class="row8">
		<td class="col0"> initialize </td><td class="col1"> ini </td>
	</tr>
	<tr class="row9">
		<td class="col0"> interpolate </td><td class="col1"> intpol </td>
	</tr>
	<tr class="row10">
		<td class="col0"> ocean </td><td class="col1"> ocn </td>
	</tr>
	<tr class="row11">
		<td class="col0"> optimize </td><td class="col1"> optim </td>
	</tr>
	<tr class="row12">
		<td class="col0"> prepare </td><td class="col1"> prep </td>
	</tr>
	<tr class="row13">
		<td class="col0"> restart </td><td class="col1"> rs/rst </td>
	</tr>
	<tr class="row14">
		<td class="col0"> turbulence </td><td class="col1"> turb </td>
	</tr>
	<tr class="row15">
		<td class="col0"> vertical </td><td class="col1"> vert </td>
	</tr>
	<tr class="row16">
		<td class="col0"> viscosity </td><td class="col1"> visc </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:7,&quot;range&quot;:&quot;3448-3808&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u7565\u8a9e&quot;,&quot;hid&quot;:&quot;\u7565\u8a9e&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;3002-&quot;} --></div>
</body>
</html>
