<!DOCTYPE html>
<html lang="ja" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>mri.com-user:jpn:run_glb-np-jpn</title>
<meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="mri.com-user,jpn,run_glb-np-jpn"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='mri.com-user:jpn';var JSINFO = {"id":"mri.com-user:jpn:run_glb-np-jpn","namespace":"mri.com-user:jpn","ACT":"export_xhtml","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<link rel="stylesheet" type="text/css" href="standard.css">
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2" defer="defer"></script>
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=1ba1ca9e5699c4cd37eb1cb4bdf6d000" defer="defer"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<div class="level1"><a href="index.html">MRI.COM</a></div>
<!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">目次</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#全球_-_北太平洋_-_日本近海実験の実施方法">全球 - 北太平洋 - 日本近海実験の実施方法</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#準備">準備</a></div></li>
<li class="level2"><div class="li"><a href="#モデルの積分_fx100">モデルの積分（@FX100）</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="全球_-_北太平洋_-_日本近海実験の実施方法">全球 - 北太平洋 - 日本近海実験の実施方法</h1>
<div class="level1">

<p>
気象研 FX100 を用いた「全球－北太平洋-日本近海ネスティング実験」の実施方法です。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u5168\u7403 - \u5317\u592a\u5e73\u6d0b - \u65e5\u672c\u8fd1\u6d77\u5b9f\u9a13\u306e\u5b9f\u65bd\u65b9\u6cd5&quot;,&quot;hid&quot;:&quot;\u5168\u7403_-_\u5317\u592a\u5e73\u6d0b_-_\u65e5\u672c\u8fd1\u6d77\u5b9f\u9a13\u306e\u5b9f\u65bd\u65b9\u6cd5&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-192&quot;} -->
<h2 class="sectionedit2" id="準備">準備</h2>
<div class="level2">

<p>
<a href="./mri.com-user_jpn_run_glb-np.html" class="wikilink1" title="mri.com-user_jpn_run_glb-np" data-wiki-id="mri.com-user_jpn_run_glb-np">全球－北太平洋実験の実施方法</a>を参照して、以下を実行。
</p>
<ol>
<li class="level1"><div class="li"> 入力ファイルを整備</div>
</li>
<li class="level1"><div class="li"> パッケージを clone して、初期設定を行う</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u6e96\u5099&quot;,&quot;hid&quot;:&quot;\u6e96\u5099&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;193-401&quot;} -->
<h2 class="sectionedit3" id="モデルの積分_fx100">モデルの積分（@FX100）</h2>
<div class="level2">

<p>
<strong>exp</strong> ディレクトリで GLB-NP-JPN モデルの実行を行う
</p>

</div>

<h4 id="実験の実行環境を作成">実験の実行環境を作成</h4>
<div class="level4">

<p>
実験の基本設定を<code>config_exp.sh</code>に書く。
</p>
<pre class="code">$ cd exp
$ cp sample/config_exp.sh .
config_exp.sh を編集  (このファイルは版管理対象外)
潮汐を解く場合は TIDE=yes、気圧を入れる場合は SLP=yes とする(ファイルがない場合はデフォルト設定で動作する)</pre>

<p>
編集用の設定ファイルを作る。以下のスクリプトを使う。<sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup>
</p>
<pre class="code">$ ./make_newexp.sh [-s] 実験名</pre>

<p>
以下のファイルが作成されるので、必要に応じて編集する(版管理対象外)。
</p>
<ul>
<li class="level1"><div class="li"> config_files/configure.in-[glb/np/jpn] コンパイル設定</div>
</li>
<li class="level1"><div class="li"> run/run_conf.sh                        ランの設定 (run/template/run_conf.sh から作成される）</div>
</li>
<li class="level1"><div class="li"> run/run.sh                             ジョブ実行シェル・スクリプト（run/template/run.sh から作成される）</div>
</li>
</ul>

</div>

<h4 id="mricomのコンパイル">MRI.COMのコンパイル</h4>
<div class="level4">
<pre class="code">$ cd run
$ ./compile.sh </pre>

</div>

<h4 id="ランの設定">ランの設定</h4>
<div class="level4">

<p>
run_conf.sh を編集する。
</p>

</div>

<h4 id="初期値を_restart-_glb_np_にシンボリックリンク">初期値を restart-[glb,np] にシンボリックリンク</h4>
<div class="level4">
<pre class="code">     $ ./link_restart.sh </pre>

</div>

<h4 id="run_presh_の実行によりnamelistなどを作成">run_pre.sh の実行によりnamelistなどを作成</h4>
<div class="level4">
<pre class="code">     $ ./run_pre.sh </pre>

<p>
run_conf.sh をもとに以下のNAMELISTファイルを作る。
</p>
<ul>
<li class="level1"><div class="li">  NAMELIST.GLOBAL</div>
</li>
<li class="level1"><div class="li">  NAMELIST.GLOBAL.MONITOR</div>
</li>
<li class="level1"><div class="li">  NAMELIST.NP01</div>
</li>
<li class="level1"><div class="li">  NAMELIST.NP01.MONITOR</div>
</li>
<li class="level1"><div class="li">  NAMELIST.JPN01</div>
</li>
<li class="level1"><div class="li">  NAMELIST.JPN01.MONITOR</div>
</li>
</ul>

</div>

<h4 id="実験の実行">実験の実行</h4>
<div class="level4">

<p>
run.sh を編集してジョブ投入。
</p>
<pre class="code">     $ pjsub run.sh</pre>

</div>

<h4 id="実行ログの整理">実行ログの整理</h4>
<div class="level4">

<p>
実験が終わったあとに、ログファイルを run/logs/ に移す。
</p>
<pre class="code">     $ ./mv_logs.sh</pre>

</div>

<h4 id="環境の掃除">環境の掃除</h4>
<div class="level4">

<p>
linkdir/history/[実験名]/ と linkdir/restart/[実験名]/に出力がまとめられている。
問題なければ以下で環境を掃除する。
</p>
<pre class="code">     $ cd exp
     $ ./clean_exp_confs.sh</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u30e2\u30c7\u30eb\u306e\u7a4d\u5206\uff08@FX100\uff09&quot;,&quot;hid&quot;:&quot;\u30e2\u30c7\u30eb\u306e\u7a4d\u5206_fx100&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;402-&quot;} --><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">-sで実行するとコピーの代わりにテンプレートファイルへリンクする。</div></div>
</div>
</div>
</body>
</html>
