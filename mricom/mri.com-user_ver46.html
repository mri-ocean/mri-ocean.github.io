<!DOCTYPE html>
<html lang="ja" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>mri.com-user:ver46</title>
<meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="mri.com-user,ver46"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='mri.com-user';var JSINFO = {"id":"mri.com-user:ver46","namespace":"mri.com-user","ACT":"export_xhtml","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<link rel="stylesheet" type="text/css" href="standard.css">
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2" defer="defer"></script>
<script charset="utf-8" src="/~ocpublic/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=1ba1ca9e5699c4cd37eb1cb4bdf6d000" defer="defer"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<div class="level1"><a href="index.html">MRI.COM</a></div>
<!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">目次</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#mricom_ver46">MRI.COM ver.4.6</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#ソースコードの取得">ソースコードの取得</a></div></li>
<li class="level2"><div class="li"><a href="#追加された主な機能">追加された主な機能</a></div></li>
<li class="level2"><div class="li"><a href="#ver44_から_46_への移行">ver.4.4 から 4.6 への移行</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#入力データファイル">入力データファイル</a></div></li>
<li class="level3"><div class="li"><a href="#コンパイル・オプション">コンパイル・オプション</a></div></li>
<li class="level3"><div class="li"><a href="#namelist">namelist</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#機能削除の予定">機能削除の予定</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="mricom_ver46">MRI.COM ver.4.6</h1>
<div class="level1">

<p>
MRI.COM ver.4.6 は、2019年12月にリリースされた安定版です。
日本沿岸海況監視予測システムのモデル部分になります。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;MRI.COM ver.4.6&quot;,&quot;hid&quot;:&quot;mricom_ver46&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-188&quot;} -->
<h2 class="sectionedit2" id="ソースコードの取得">ソースコードの取得</h2>
<div class="level2">

<p>
MRI.COM gitリポジトリでブランチ「4_6」をチェックアウトして下さい。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97&quot;,&quot;hid&quot;:&quot;\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;189-323&quot;} -->
<h2 class="sectionedit3" id="追加された主な機能">追加された主な機能</h2>
<div class="level2">

<p>
ver.4.4から以下の機能が追加されています。
</p>
<ul>
<li class="level1 node"><div class="li"> <strong>時間差分スキーム Leapfrog-Adams-Moulton (LFAM3) の導入</strong></div>
<ul>
<li class="level2"><div class="li"> オプションで指定しますが、次の安定版(ver.5.0)ではデフォルトになります</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> 海氷のリッジングに関するパラメータ shear dissipation ratio の追加</div>
</li>
<li class="level1"><div class="li"> 相対風速データを絶対風速に換算して使用するための機能</div>
</li>
<li class="level1"><div class="li"> 等密度面拡散・GMパラメタリゼーションなしで、混合層渦パラメタリゼーションを使えるように拡張</div>
</li>
<li class="level1 node"><div class="li"> オフライン・トレーサーモデルの機能強化</div>
<ul>
<li class="level2"><div class="li"> age, cfcの読み込み</div>
</li>
<li class="level2"><div class="li"> 初期値の時間補間の指定</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> オフライン・ネスティングの機能強化</div>
<ul>
<li class="level2"><div class="li"> 側面境界に単精度データが使用できる</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> 出力機能の強化</div>
<ul>
<li class="level2"><div class="li"> SOMフラックスリミッターの発生頻度, ポテンシャル密度, spiciness</div>
</li>
<li class="level2"><div class="li"> PPMスキームによるトレーサー輸送</div>
</li>
<li class="level2"><div class="li"> 海氷の熱収支と海面フラックス</div>
</li>
<li class="level2"><div class="li"> 等密度面解析の強化</div>
</li>
<li class="level2"><div class="li"> tide killerをかけた出力</div>
</li>
<li class="level2"><div class="li"> 特定の期間だけ出力</div>
</li>
<li class="level2"><div class="li"> ある地点の時系列モニタ</div>
</li>
<li class="level2"><div class="li"> NetCDF 形式での倍精度出力</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> 高速化</div>
<ul>
<li class="level2"><div class="li"> 順圧モード計算の高速化</div>
</li>
<li class="level2"><div class="li"> パッシブトレーサーの時間積分の高速化</div>
</li>
<li class="level2"><div class="li"> SOMリスタート入出力のMPI-IO対応</div>
</li>
<li class="level2"><div class="li"> OpenMP 指示行</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> マシン対応: ES3, 気象庁Cray XC50</div>
</li>
<li class="level1"><div class="li"> Doxygen対応</div>
</li>
</ul>

<p>
その他の変更
</p>
<ul>
<li class="level1"><div class="li"> 海氷モデルの安定性向上</div>
</li>
<li class="level1"><div class="li"> 海氷リッジングのスキームを変更</div>
</li>
<li class="level1 node"><div class="li"> PPMスキームのアルゴリズムを変更</div>
<ul>
<li class="level2"><div class="li"> リミッターを Zalesak (1979) から Lin et al. (1994) に変更</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> 多数のバグ修正</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u8ffd\u52a0\u3055\u308c\u305f\u4e3b\u306a\u6a5f\u80fd&quot;,&quot;hid&quot;:&quot;\u8ffd\u52a0\u3055\u308c\u305f\u4e3b\u306a\u6a5f\u80fd&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;324-2078&quot;} -->
<h2 class="sectionedit4" id="ver44_から_46_への移行">ver.4.4 から 4.6 への移行</h2>
<div class="level2">

<p>
安定版 <a href="./mri.com-user_ver44.html" class="wikilink1" title="mri.com-user_ver44" data-wiki-id="mri.com-user_ver44">ver.4.4</a> から ver.4.6 へ移行する場合のメモです。
ほぼ同じ設定にした場合でも結果は変わります。
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ver.4.4 \u304b\u3089 4.6 \u3078\u306e\u79fb\u884c&quot;,&quot;hid&quot;:&quot;ver44_\u304b\u3089_46_\u3078\u306e\u79fb\u884c&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;2079-2274&quot;} -->
<h3 class="sectionedit5" id="入力データファイル">入力データファイル</h3>
<div class="level3">
<ul>
<li class="level1 node"><div class="li"> <strong>SOMリスタート</strong> ファイル名の変更</div>
<ul>
<li class="level2"><div class="li"> nml_somadv - l_auto_<abbr title="specification">spec</abbr>_for_som_restart = .true. と指定する</div>
</li>
<li class="level2"><div class="li"> 既存のファイルをリネームする場合は tools/ver46to47/ を参照</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> <strong>長波放射</strong> 正味ではなく下向き成分を与えるように変更</div>
<ul>
<li class="level2"><div class="li"> LWDOWNオプションを使っていた場合は変更不要</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u5165\u529b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb&quot;,&quot;hid&quot;:&quot;\u5165\u529b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;2275-2672&quot;} -->
<h3 class="sectionedit6" id="コンパイル・オプション">コンパイル・オプション</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> 廃止：LWDOWN</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u30b3\u30f3\u30d1\u30a4\u30eb\u30fb\u30aa\u30d7\u30b7\u30e7\u30f3&quot;,&quot;hid&quot;:&quot;\u30b3\u30f3\u30d1\u30a4\u30eb\u30fb\u30aa\u30d7\u30b7\u30e7\u30f3&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;2673-2738&quot;} -->
<h3 class="sectionedit7" id="namelist">namelist</h3>
<div class="level3">

<p>
主な変更です。変更する場合は docs/README_Namelist.md を参照してください
</p>
<ul>
<li class="level1 node"><div class="li"> <strong>リスタート</strong>: nmlrs_* から nml_restart への変更</div>
<ul>
<li class="level2"><div class="li"> docs/README_Restart.md を参照</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>ヒストリー</strong>: 旧形式 (nmlhs_*) の削除</div>
</li>
<li class="level1"><div class="li"> <strong>PPMスキーム</strong>: nml_tracer_data - adv_scheme の変更</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;namelist&quot;,&quot;hid&quot;:&quot;namelist&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;2739-3078&quot;} -->
<h2 class="sectionedit8" id="機能削除の予定">機能削除の予定</h2>
<div class="level2">

<p>
次期安定版(v5.0)で削除される予定の機能です。
</p>
<ul>
<li class="level1"><div class="li"> leap frog + Matsuno 時間差分スキーム</div>
</li>
<li class="level1"><div class="li"> z-sigmaスキーム (オプション ZSTAR の必須化)</div>
</li>
<li class="level1"><div class="li"> リスタートファイルの旧指定方法 (nmlrs_*)</div>
</li>
<li class="level1"><div class="li"> 2層以上のBBL (4.6で削除する予定だったが延期)</div>
</li>
<li class="level1"><div class="li"> BULKNCAR 時にBULKITER必須化 (4.6で削除する予定だったが延期)</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u6a5f\u80fd\u524a\u9664\u306e\u4e88\u5b9a&quot;,&quot;hid&quot;:&quot;\u6a5f\u80fd\u524a\u9664\u306e\u4e88\u5b9a&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;3079-&quot;} --></div>
</body>
</html>
